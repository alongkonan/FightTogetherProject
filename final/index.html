<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Prep Dashboard - ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ</title>
    
    <!-- Google Fonts: Sarabun for readability -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #fdfbf7; /* Warm neutral background */
            color: #374151;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Chart Container Styles - Strictly Enforced */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px; /* Max width constraint */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px;
        }
        
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 24px;
            width: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .active-tab {
            border-bottom: 3px solid #f59e0b;
            color: #b45309;
            font-weight: 700;
        }
        
        .inactive-tab {
            border-bottom: 3px solid transparent;
            color: #6b7280;
        }
        .inactive-tab:hover {
            color: #374151;
            border-bottom: 3px solid #d1d5db;
        }

        .category-pill {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 9999px;
            font-weight: 600;
        }
    </style>
    
    <!-- Chosen Palette: Warm Neutral Background (#fdfbf7) with Category Colors: 
         Science/Math (Blue), Language (Pink), Social/Gen (Amber), Break (Gray) -->

    <!-- Application Structure Plan: 
         1. Header: Summary of the goal (3 days) and key technique (Pomodoro).
         2. Dashboard Overview: Charts showing subject weight and study/break balance.
         3. Interactive Schedule: Tabs for each day. Vertical timeline layout.
            - Interactions: Filter by category, Click to see 'Teacher' and 'Focus' details.
            - Visuals: Progress bars simulating Pomodoro cycles.
         4. Rationale: The user needs to manage energy over 3 intense days. Grouping by day and providing 
            visual cues for "Break" vs "Study" helps mental preparation. -->

    <!-- Visualization & Content Choices:
         - Doughnut Chart: Shows the proportion of subjects (Sci vs Lang vs Social). Goal: See content balance.
         - Bar Chart: Study hours vs Break hours per day. Goal: Workload management.
         - Timeline Cards: Text-based cards for each slot. Goal: Detailed instruction reading.
         - Pomodoro Visuals: CSS-based bars inside cards. Goal: Quick understanding of the 50/10 rhythm.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
         
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-stone-50 min-h-screen">

    <!-- Navigation / Header -->
    <header class="bg-white shadow-sm sticky top-0 z-20 border-b border-stone-200">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-bold text-stone-800">
                    <i class="fas fa-book-open text-amber-500 mr-2"></i> Dashboard ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö‡∏õ‡∏•‡∏≤‡∏¢‡∏†‡∏≤‡∏Ñ
                </h1>
                <p class="text-sm text-stone-500 hidden md:block">‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 3 ‡∏ß‡∏±‡∏ô: 22 ‡∏Å.‡∏û., 28 ‡∏Å.‡∏û., 1 ‡∏°‡∏µ.‡∏Ñ.</p>
            </div>
            <div class="flex items-center space-x-4">
                <div class="hidden md:flex flex-col items-end mr-4">
                    <span class="text-xs font-semibold text-stone-400 uppercase tracking-wide">‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏´‡∏•‡∏±‡∏Å</span>
                    <span class="text-sm font-bold text-red-500 bg-red-50 px-2 py-1 rounded">Pomodoro 50/10 üçÖ</span>
                </div>
                <button onclick="window.print()" class="bg-stone-100 hover:bg-stone-200 text-stone-600 px-3 py-2 rounded-lg transition">
                    <i class="fas fa-print"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 pb-20">
        
        <!-- Intro Section -->
        <section class="mb-8">
            <div class="bg-white rounded-2xl shadow-sm p-6 border border-stone-100">
                <h2 class="text-lg font-bold text-stone-800 mb-2">üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</h2>
                <p class="text-stone-600 leading-relaxed">
                    ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ 16 ‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÇ‡∏Ñ‡πâ‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ 3 ‡∏ß‡∏±‡∏ô 
                    ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡πà‡∏≠‡∏á‡∏à‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≠‡∏á ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏π‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô 
                    ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏≥‡πÄ‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
                </p>
            </div>
        </section>

        <!-- Stats & Charts Dashboard -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- Chart 1: Subject Distribution -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="font-bold text-stone-700">üìä ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≤‡∏ö)</h3>
                    <p class="text-xs text-stone-400">‡πÄ‡∏ô‡πâ‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå/‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‡πÅ‡∏•‡∏∞ ‡∏†‡∏≤‡∏©‡∏≤</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-stone-50 rounded-xl p-4">
                    <div class="chart-container">
                        <canvas id="subjectDistributionChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Chart 2: Time Management -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-stone-100 flex flex-col">
                <div class="mb-4">
                    <h3 class="font-bold text-stone-700">‚è≥ ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô vs ‡πÄ‡∏ß‡∏•‡∏≤‡∏û‡∏±‡∏Å (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</h3>
                    <p class="text-xs text-stone-400">‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô</p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-stone-50 rounded-xl p-4">
                    <div class="chart-container">
                        <canvas id="timeManagementChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Day Tabs Navigation -->
        <div class="flex overflow-x-auto border-b border-stone-200 mb-6 bg-white sticky top-16 z-10 shadow-sm rounded-t-lg">
            <button onclick="switchTab('day1')" id="tab-day1" class="flex-1 py-4 px-6 text-center whitespace-nowrap active-tab transition-colors focus:outline-none">
                <span class="block text-xs uppercase tracking-wider opacity-70">‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</span>
                <span class="text-lg">22 ‡∏Å.‡∏û.</span>
            </button>
            <button onclick="switchTab('day2')" id="tab-day2" class="flex-1 py-4 px-6 text-center whitespace-nowrap inactive-tab transition-colors focus:outline-none">
                <span class="block text-xs uppercase tracking-wider opacity-70">‡πÄ‡∏™‡∏≤‡∏£‡πå</span>
                <span class="text-lg">28 ‡∏Å.‡∏û.</span>
            </button>
            <button onclick="switchTab('day3')" id="tab-day3" class="flex-1 py-4 px-6 text-center whitespace-nowrap inactive-tab transition-colors focus:outline-none">
                <span class="block text-xs uppercase tracking-wider opacity-70">‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå</span>
                <span class="text-lg">1 ‡∏°‡∏µ.‡∏Ñ.</span>
            </button>
        </div>

        <!-- Schedule Content Area -->
        <div id="schedule-container" class="relative">
            <!-- Dynamic Content Injected Here -->
        </div>

    </main>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Structure based on study_schedule.md ---
        const scheduleData = {
            day1: {
                date: "22 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå",
                title: "Day 1: ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ó‡∏¢‡πå",
                desc: "‡∏ß‡∏±‡∏ô‡πÅ‡∏£‡∏Å‡∏™‡∏°‡∏≠‡∏á‡∏™‡∏î‡πÉ‡∏™ ‡∏•‡∏∏‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏´‡∏ô‡∏±‡∏Å (‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå, ‡∏Ñ‡∏ì‡∏¥‡∏ï, ‡πÄ‡∏Ñ‡∏°‡∏µ) ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏î‡∏≤‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
                items: [
                    { time: "09:00 - 10:30", subject: "‡∏ä‡∏µ‡∏ß ‡∏û‡∏ï.", teacher: "‡∏Ñ‡∏£‡∏π‡∏ä‡∏•‡∏ò‡∏¥‡∏ä‡∏≤", type: "study", category: "sci", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ß‡∏≤‡∏î Mind Map ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏Ñ‡∏µ‡∏¢‡πå‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏î" },
                    { time: "10:30 - 12:00", subject: "‡∏Ñ‡∏ì‡∏¥‡∏ï ‡∏û‡∏ï.", teacher: "‡∏Ñ‡∏£‡∏π‡πÄ‡∏ä‡∏©‡∏ê‡πå‡∏ò‡∏ô‡∏≤", type: "study", category: "math", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ã‡∏õ‡∏ï‡πå‡πÅ‡∏•‡∏∞‡∏•‡∏∏‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏¢‡∏≤‡∏Å" },
                    { time: "12:00 - 13:30", subject: "‡∏û‡∏±‡∏Å‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß", type: "break", category: "break", duration: 90, icon: "fa-utensils" },
                    { time: "13:30 - 15:15", subject: "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏û‡∏ï.", teacher: "‡∏Ñ‡∏£‡∏π‡∏ß‡∏£‡∏£‡∏ì‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå", type: "study", category: "sci", duration: 105, pomodoro: [50, 10, 45], note: "‡πÄ‡∏ô‡πâ‡∏ô‡∏à‡∏≥‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏ù‡∏∂‡∏Å‡∏ó‡∏≥‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì" },
                    { time: "15:15 - 16:45", subject: "‡πÇ‡∏•‡∏Å‡∏î‡∏≤‡∏£‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", teacher: "‡∏Ñ‡∏£‡∏π‡∏Å‡∏≤‡∏ô‡∏ï‡πå‡∏ò‡∏¥‡∏î‡∏≤", type: "study", category: "sci", duration: 90, pomodoro: [50, 10, 30], note: "‡∏≠‡πà‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ" },
                    { time: "16:45 - 19:00", subject: "‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô", type: "break", category: "break", duration: 135, icon: "fa-person-running" },
                    { time: "19:00 - 20:00", subject: "‡πÑ‡∏ó‡∏¢ ‡∏û‡∏ê.", teacher: "‡∏Ñ‡∏£‡∏π‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏û‡∏á‡∏®‡πå", type: "study", category: "lang", duration: 60, pomodoro: [50, 10], note: "‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ" },
                    { time: "20:00 - 21:00", subject: "‡∏™‡∏∏‡∏Ç‡∏®‡∏∂‡∏Å‡∏©‡∏≤", teacher: "‡∏Ñ‡∏£‡∏π‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏û‡∏á‡∏®‡πå", type: "study", category: "gen", duration: 60, pomodoro: [50, 10], note: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à" }
                ]
            },
            day2: {
                date: "28 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå",
                title: "Day 2: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥ ‡∏†‡∏≤‡∏©‡∏≤ ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏á‡∏Ñ‡∏°",
                desc: "‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡πâ‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥",
                items: [
                    { time: "09:00 - 10:30", subject: "‡πÄ‡∏Ñ‡∏°‡∏µ ‡∏û‡∏ï.", teacher: "‡∏Ñ‡∏£‡∏π‡∏û‡∏¥‡πÑ‡∏•‡∏ß‡∏£‡∏£‡∏ì", type: "study", category: "sci", duration: 90, pomodoro: [50, 10, 30], note: "‡πÄ‡∏ô‡πâ‡∏ô‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ‡πÅ‡∏•‡∏∞‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç" },
                    { time: "10:30 - 12:00", subject: "‡∏Ñ‡∏ì‡∏¥‡∏ï ‡∏û‡∏ê.", teacher: "‡∏Ñ‡∏£‡∏π‡∏™‡∏≥‡∏£‡∏≤‡∏ç", type: "study", category: "math", duration: 90, pomodoro: [50, 10, 30], note: "‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥" },
                    { time: "12:00 - 13:00", subject: "‡∏û‡∏±‡∏Å‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß", type: "break", category: "break", duration: 60, icon: "fa-utensils" },
                    { time: "13:00 - 14:30", subject: "Eng ‡∏û‡∏ê.", teacher: "‡∏Ñ‡∏£‡∏π‡∏ê‡∏¥‡∏ï‡∏¥‡∏£‡∏±‡∏ï‡∏ô‡πå", type: "study", category: "lang", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô Grammar ‡πÅ‡∏•‡∏∞ Vocab" },
                    { time: "14:30 - 16:00", subject: "Eng ‡∏≠‡πà‡∏≤‡∏ô-‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô", teacher: "‡∏Ñ‡∏£‡∏π‡∏ô‡∏†‡∏±‡∏™‡∏Å‡∏£", type: "study", category: "lang", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ù‡∏∂‡∏Å‡∏ó‡∏≥‡πÇ‡∏à‡∏ó‡∏¢‡πå Reading ‡πÅ‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô" },
                    { time: "16:00 - 19:00", subject: "‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô", type: "break", category: "break", duration: 180, icon: "fa-bed" },
                    { time: "19:00 - 20:00", subject: "‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏û‡∏ê.", teacher: "‡∏Ñ‡∏£‡∏π‡∏ä‡∏∏‡∏£‡∏µ‡∏Å‡∏£‡∏ì‡πå", type: "study", category: "soc", duration: 60, pomodoro: [50, 10], note: "‡∏™‡∏£‡∏∏‡∏õ‡∏®‡∏≤‡∏™‡∏ô‡∏≤ ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏†‡∏π‡∏°‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå" },
                    { time: "20:00 - 21:00", subject: "‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏Ø", teacher: "‡∏Ñ‡∏£‡∏π‡∏™‡∏°‡∏Ñ‡∏¥‡∏î", type: "study", category: "gen", duration: 60, pomodoro: [50, 10], note: "‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÜ ‡∏ï‡∏≤ ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î" }
                ]
            },
            day3: {
                date: "1 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°",
                title: "Day 3: ‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡∏Å ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",
                desc: "‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏≠‡∏ö ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î",
                items: [
                    { time: "09:00 - 10:30", subject: "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ‡∏û‡∏ê.", teacher: "‡∏Ñ‡∏£‡∏π‡∏à‡∏≤‡∏£‡∏∏‡∏ß‡∏£‡∏£‡∏ì", type: "study", category: "soc", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô Timeline ‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç" },
                    { time: "10:30 - 12:00", subject: "‡∏à‡∏µ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå", teacher: "‡∏Ñ‡∏£‡∏π‡∏à‡∏±‡∏ô‡∏ó‡∏≤", type: "study", category: "lang", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå ‡∏û‡∏¥‡∏ô‡∏≠‡∏¥‡∏ô ‡∏ö‡∏ó‡∏™‡∏ô‡∏ó‡∏ô‡∏≤" },
                    { time: "12:00 - 13:00", subject: "‡∏û‡∏±‡∏Å‡∏ó‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß", type: "break", category: "break", duration: 60, icon: "fa-utensils" },
                    { time: "13:00 - 14:30", subject: "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏û‡∏ï. (‡∏£‡∏≠‡∏ö 2)", teacher: "‡∏Ñ‡∏£‡∏π‡∏ß‡∏£‡∏£‡∏ì‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå", type: "study", category: "sci", duration: 90, pomodoro: [50, 10, 30], note: "‡∏ï‡∏∞‡∏•‡∏∏‡∏¢‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÄ‡∏Å‡πà‡∏≤ ‡πÅ‡∏•‡∏∞‡∏≠‡∏∏‡∏î‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô" },
                    { time: "14:30 - 15:30", subject: "‡∏®‡∏¥‡∏•‡∏õ‡∏∞ & ‡πÅ‡∏ô‡∏∞‡πÅ‡∏ô‡∏ß", teacher: "‡∏Ñ‡∏£‡∏π‡∏≠‡∏£‡∏¢‡∏≤ / ‡∏Ñ‡∏£‡∏π‡∏Å‡∏≤‡∏ç‡∏à‡∏ô‡∏≤", type: "study", category: "gen", duration: 60, pomodoro: [50, 10], note: "‡∏≠‡πà‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÜ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏ö‡∏≤‡πÜ" },
                    { time: "15:30 Onwards", subject: "OVERALL REVIEW", type: "highlight", category: "highlight", duration: 240, icon: "fa-star", note: "‡∏´‡πâ‡∏≤‡∏°‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà! ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô Short Note ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏î‡∏¥‡∏°" }
                ]
            }
        };

        const categoryColors = {
            sci: "bg-blue-100 text-blue-800 border-blue-200",
            math: "bg-indigo-100 text-indigo-800 border-indigo-200",
            lang: "bg-pink-100 text-pink-800 border-pink-200",
            soc: "bg-amber-100 text-amber-800 border-amber-200",
            gen: "bg-emerald-100 text-emerald-800 border-emerald-200",
            break: "bg-stone-100 text-stone-600 border-stone-200",
            highlight: "bg-red-50 text-red-800 border-red-200"
        };

        const categoryLabels = {
            sci: "‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
            math: "‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
            lang: "‡∏†‡∏≤‡∏©‡∏≤",
            soc: "‡∏™‡∏±‡∏á‡∏Ñ‡∏°/‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥",
            gen: "‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏™‡∏∏‡∏Ç/‡∏®‡∏¥‡∏•‡∏õ‡∏∞/‡∏á‡∏≤‡∏ô)",
            highlight: "‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡∏£‡∏ß‡∏°"
        };

        // --- Core Functions ---

        function init() {
            renderCharts();
            switchTab('day1'); // Default load
        }

        function switchTab(dayKey) {
            // Update Tab Styles
            ['day1', 'day2', 'day3'].forEach(d => {
                const tab = document.getElementById(`tab-${d}`);
                if (d === dayKey) {
                    tab.classList.remove('inactive-tab');
                    tab.classList.add('active-tab');
                } else {
                    tab.classList.add('inactive-tab');
                    tab.classList.remove('active-tab');
                }
            });

            renderSchedule(dayKey);
        }

        function renderSchedule(dayKey) {
            const data = scheduleData[dayKey];
            const container = document.getElementById('schedule-container');
            
            let html = `
                <div class="mb-6 animate-fade-in-up">
                    <div class="flex items-center justify-between mb-2">
                        <h2 class="text-xl font-bold text-stone-800">${data.title}</h2>
                    </div>
                    <p class="text-stone-500 text-sm bg-stone-50 p-3 rounded-lg border border-stone-100">
                        <i class="fas fa-info-circle text-amber-500 mr-2"></i> ${data.desc}
                    </p>
                </div>
                <div class="space-y-4 timeline-line relative pb-10">
            `;

            data.items.forEach((item, index) => {
                const isBreak = item.type === 'break';
                const isHighlight = item.type === 'highlight';
                
                // Color Classes
                const colorClass = categoryColors[item.category] || "bg-gray-100 text-gray-800";
                
                // Icon Logic
                let iconHtml = '';
                if(isBreak) iconHtml = `<div class="w-10 h-10 rounded-full bg-stone-200 flex items-center justify-center text-stone-500 z-10 relative border-4 border-stone-50"><i class="fas ${item.icon}"></i></div>`;
                else if(isHighlight) iconHtml = `<div class="w-10 h-10 rounded-full bg-red-500 flex items-center justify-center text-white z-10 relative border-4 border-stone-50 shadow-lg"><i class="fas ${item.icon}"></i></div>`;
                else iconHtml = `<div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-stone-400 z-10 relative border-4 border-stone-50 shadow-sm text-sm font-bold">${index + 1}</div>`;

                // Pomodoro Bar HTML
                let pomodoroHtml = '';
                if (item.pomodoro) {
                    pomodoroHtml = `<div class="mt-3 flex items-center space-x-1 w-full max-w-xs">
                        <span class="text-[10px] text-stone-400 w-12">Pomodoro:</span>
                        <div class="h-2 rounded-l-full bg-red-400 w-[50%] relative group cursor-help">
                            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-stone-800 text-white text-xs px-2 py-1 rounded">‡∏≠‡πà‡∏≤‡∏ô 50 ‡∏ô.</span>
                        </div>
                        <div class="h-2 bg-green-400 w-[10%] relative group cursor-help">
                             <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-stone-800 text-white text-xs px-2 py-1 rounded">‡∏û‡∏±‡∏Å 10 ‡∏ô.</span>
                        </div>`;
                    
                    if (item.pomodoro[2]) {
                        pomodoroHtml += `<div class="h-2 rounded-r-full bg-red-300 w-[${item.pomodoro[2]}%] relative group cursor-help">
                             <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 hidden group-hover:block bg-stone-800 text-white text-xs px-2 py-1 rounded">‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠ ${item.pomodoro[2]} ‡∏ô.</span>
                        </div>`;
                    } else {
                        // Close rounded if no 3rd block
                         pomodoroHtml = pomodoroHtml.replace('rounded-l-full', 'rounded-full');
                    }
                    pomodoroHtml += `</div>`;
                }

                // Card Content
                html += `
                    <div class="flex gap-4 group">
                        <div class="flex-shrink-0 flex flex-col items-center">
                            ${iconHtml}
                        </div>
                        <div class="flex-grow pb-2">
                            <div class="bg-white border border-stone-100 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow duration-300 ${isHighlight ? 'ring-2 ring-red-100' : ''}">
                                <div class="flex flex-wrap justify-between items-start mb-1">
                                    <span class="text-sm font-bold text-amber-600 mb-1 md:mb-0"><i class="far fa-clock mr-1"></i> ${item.time}</span>
                                    ${!isBreak && !isHighlight ? `<span class="category-pill ${colorClass}">${categoryLabels[item.category] || item.category.toUpperCase()}</span>` : ''}
                                </div>
                                
                                <h3 class="text-lg font-bold text-stone-800 leading-tight">${item.subject}</h3>
                                
                                ${item.teacher ? `<p class="text-sm text-stone-500 mt-1"><i class="fas fa-chalkboard-user mr-1 text-stone-300"></i> ${item.teacher}</p>` : ''}
                                
                                ${item.note ? `<div class="mt-2 text-sm text-stone-600 bg-stone-50 p-2 rounded border-l-2 border-stone-300">${item.note}</div>` : ''}
                                
                                ${!isBreak ? pomodoroHtml : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;
            container.innerHTML = html;
        }

        function renderCharts() {
            // Data Calculation
            let subjects = { sci: 4, math: 2, lang: 5, soc: 2, gen: 3 }; // Count from schedule
            let hours = {
                day1: { study: 5.25, break: 4.75 }, // Approx calculations
                day2: { study: 5, break: 5 },
                day3: { study: 4, break: 5 } // Excluding final review open end
            };

            // Chart 1: Subject Distribution (Doughnut)
            const ctx1 = document.getElementById('subjectDistributionChart').getContext('2d');
            new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(subjects).map(k => categoryLabels[k]),
                    datasets: [{
                        data: Object.values(subjects),
                        backgroundColor: ['#60a5fa', '#818cf8', '#f472b6', '#fbbf24', '#34d399'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { font: { family: 'Sarabun', size: 10 }, boxWidth: 10 } }
                    }
                }
            });

            // Chart 2: Time Management (Bar)
            const ctx2 = document.getElementById('timeManagementChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['22 ‡∏Å.‡∏û.', '28 ‡∏Å.‡∏û.', '1 ‡∏°‡∏µ.‡∏Ñ.'],
                    datasets: [
                        {
                            label: '‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ä‡∏°.)',
                            data: [5.25, 5, 4],
                            backgroundColor: '#f59e0b',
                            borderRadius: 4
                        },
                        {
                            label: '‡∏û‡∏±‡∏Å (‡∏ä‡∏°.)',
                            data: [4.75, 5, 2],
                            backgroundColor: '#e5e7eb',
                            borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { display: false } },
                        x: { grid: { display: false } }
                    },
                    plugins: {
                        legend: { position: 'bottom', labels: { font: { family: 'Sarabun' } } }
                    }
                }
            });
        }

        // Initialize on Load
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
