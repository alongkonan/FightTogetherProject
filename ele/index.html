<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ò‡∏≤‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ò‡∏≤‡∏ï‡∏∏</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Sarabun -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body {
            font-family: 'Sarabun', sans-serif;
        }
        /* Custom scrollbar for table */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555; 
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- Icon Components (SVG) ---
        const CheckIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
        );
        const RotateCcwIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/><path d="M3 3v9h9"/></svg>
        );
        const EyeIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
        );
        const EyeOffIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" y1="2" x2="22" y2="22"/></svg>
        );
        const TrophyIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
        );

        const ElementQuiz = () => {
            const correctData = {
                Li: { mass: [7, 6.94], atom: 3, group: [1, 'I', '1A'], period: 2, valence: 1, energy: [2, '2'], ox: [1, '+1'], p: 3, n: 4, e: 3 },
                C: { mass: [12, 12.01], atom: 6, group: [4, 14, 'IV', '4A'], period: 2, valence: 4, energy: [2, '2'], ox: [4, -4, 2, '+4', '-4', '+2', '+/-4'], p: 6, n: 6, e: 6 },
                O: { mass: [16, 16.00], atom: 8, group: [6, 16, 'VI', '6A'], period: 2, valence: 6, energy: [2, '2'], ox: [-2, 2, '-2', '+2'], p: 8, n: 8, e: 8 },
                F: { mass: [19, 19.00], atom: 9, group: [7, 17, 'VII', '7A'], period: 2, valence: 7, energy: [2, '2'], ox: [-1, '-1'], p: 9, n: 10, e: 9 },
                Ne: { mass: [20, 20.18], atom: 10, group: [8, 18, 'VIII', '8A'], period: 2, valence: 8, energy: [2, '2'], ox: [0, '0'], p: 10, n: 10, e: 10 },
                Na: { mass: [23, 22.99], atom: 11, group: [1, 'I', '1A'], period: 3, valence: 1, energy: [3, '3'], ox: [1, '+1'], p: 11, n: 12, e: 11 },
                Mg: { mass: [24, 24.31], atom: 12, group: [2, 'II', '2A'], period: 3, valence: 2, energy: [3, '3'], ox: [2, '+2'], p: 12, n: 12, e: 12 },
                Al: { mass: [27, 26.98], atom: 13, group: [3, 13, 'III', '3A'], period: 3, valence: 3, energy: [3, '3'], ox: [3, '+3'], p: 13, n: 14, e: 13 },
                P: { mass: [31, 30.97], atom: 15, group: [5, 15, 'V', '5A'], period: 3, valence: 5, energy: [3, '3'], ox: [-3, 3, 5, '-3', '+3', '+5'], p: 15, n: 16, e: 15 },
                Cl: { mass: [35, 35.5, 35.45], atom: 17, group: [7, 17, 'VII', '7A'], period: 3, valence: 7, energy: [3, '3'], ox: [-1, 1, 3, 5, 7, '-1', '+1', '+3', '+5', '+7'], p: 17, n: [18, 18.5], e: 17 },
            };

            const elements = Object.keys(correctData);
            const columns = [
                { key: 'mass', label: '‡πÄ‡∏•‡∏Ç‡∏°‡∏ß‡∏•' },
                { key: 'atom', label: '‡πÄ‡∏•‡∏Ç‡∏≠‡∏∞‡∏ï‡∏≠‡∏°' },
                { key: 'group', label: '‡∏´‡∏°‡∏π‡πà‡∏ó‡∏µ‡πà' },
                { key: 'period', label: '‡∏Ñ‡∏≤‡∏ö‡∏ó‡∏µ‡πà' },
                { key: 'valence', label: '‡πÄ‡∏ß‡πÄ‡∏•‡∏ô‡∏ã‡πå e‚Åª' },
                { key: 'energy', label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô' },
                { key: 'ox', label: '‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡πÄ‡∏î‡∏ä‡∏±‡∏ô' },
                { key: 'p', label: 'P‚Å∫' },
                { key: 'n', label: 'n' },
                { key: 'e', label: 'e‚Åª' },
            ];

            const [inputs, setInputs] = useState(() => {
                const initialState = {};
                elements.forEach(el => {
                initialState[el] = {};
                columns.forEach(col => initialState[el][col.key] = '');
                });
                return initialState;
            });

            const [validation, setValidation] = useState({});
            const [showAnswers, setShowAnswers] = useState(false);
            const [score, setScore] = useState(null);

            const handleInputChange = (element, field, value) => {
                setInputs(prev => ({
                ...prev,
                [element]: {
                    ...prev[element],
                    [field]: value
                }
                }));
                if (validation[element]?.[field]) {
                setValidation(prev => ({
                    ...prev,
                    [element]: {
                    ...prev[element],
                    [field]: null
                    }
                }));
                }
            };

            const checkAnswers = () => {
                const newValidation = {};
                let correctCount = 0;
                let totalCount = 0;

                elements.forEach(el => {
                newValidation[el] = {};
                columns.forEach(col => {
                    const userValue = inputs[el][col.key]?.toString().trim();
                    const correctValue = correctData[el][col.key];
                    
                    let isCorrect = false;
                    
                    if (Array.isArray(correctValue)) {
                    isCorrect = correctValue.some(v => v.toString().toLowerCase() === userValue.toLowerCase());
                    } else {
                    isCorrect = correctValue.toString().toLowerCase() === userValue.toLowerCase();
                    }

                    if (col.key === 'mass' && !isCorrect && !isNaN(userValue) && userValue !== '') {
                        const userNum = parseFloat(userValue);
                        const target = Array.isArray(correctValue) ? correctValue[0] : correctValue;
                        if (Math.abs(userNum - target) <= 0.5) isCorrect = true;
                    }

                    newValidation[el][col.key] = isCorrect;
                    if (isCorrect) correctCount++;
                    totalCount++;
                });
                });

                setValidation(newValidation);
                setScore({ correct: correctCount, total: totalCount });
                setShowAnswers(false);
            };

            const resetForm = () => {
                if (window.confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
                const resetState = {};
                elements.forEach(el => {
                    resetState[el] = {};
                    columns.forEach(col => resetState[el][col.key] = '');
                });
                setInputs(resetState);
                setValidation({});
                setScore(null);
                setShowAnswers(false);
                }
            };

            const toggleAnswers = () => {
                setShowAnswers(!showAnswers);
            };

            return (
                <div className="min-h-screen bg-gray-50 p-4 pb-20">
                <div className="max-w-7xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200">
                    
                    <div className="bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white text-center">
                    <h1 className="text-3xl font-bold mb-2 tracking-wide">‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ò‡∏≤‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ò‡∏≤‡∏ï‡∏∏</h1>
                    <p className="opacity-90 font-light">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</p>
                    </div>

                    <div className="p-4 flex flex-wrap gap-3 justify-center bg-gray-100 border-b border-gray-200 sticky top-0 z-20 shadow-sm">
                    <button 
                        onClick={checkAnswers}
                        className="flex items-center gap-2 px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-full font-semibold transition-all shadow-md active:scale-95 transform hover:-translate-y-0.5"
                    >
                        <CheckIcon /> ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    </button>
                    
                    <button 
                        onClick={toggleAnswers}
                        className="flex items-center gap-2 px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-full font-semibold transition-all shadow-md active:scale-95 transform hover:-translate-y-0.5"
                    >
                        {showAnswers ? <><EyeOffIcon /> ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏â‡∏•‡∏¢</> : <><EyeIcon /> ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢</>}
                    </button>

                    <button 
                        onClick={resetForm}
                        className="flex items-center gap-2 px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-full font-semibold transition-all shadow-md active:scale-95 transform hover:-translate-y-0.5"
                    >
                        <RotateCcwIcon /> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                    </button>
                    </div>

                    {score && (
                    <div className={`p-4 text-center ${score.correct === score.total ? 'bg-green-100 text-green-800' : 'bg-blue-50 text-blue-800'} animate-fade-in transition-all duration-500`}>
                        <div className="flex justify-center items-center gap-2 text-xl font-bold">
                            <TrophyIcon className={score.correct === score.total ? 'text-yellow-600' : 'text-blue-500'} />
                            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: {score.correct} / {score.total}
                        </div>
                        {score.correct === score.total && <p className="text-base mt-1 font-medium">‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î üéâ</p>}
                    </div>
                    )}

                    <div className="overflow-x-auto p-4">
                    <table className="w-full border-collapse min-w-[1000px]">
                        <thead>
                        <tr className="bg-gray-800 text-white">
                            <th className="p-3 border border-gray-700 sticky left-0 z-10 bg-gray-800 w-20 shadow-md">‡∏ò‡∏≤‡∏ï‡∏∏</th>
                            {columns.map((col) => (
                            <th key={col.key} className="p-3 border border-gray-700 text-sm md:text-base font-semibold">
                                {col.label}
                            </th>
                            ))}
                        </tr>
                        </thead>
                        <tbody>
                        {elements.map((el, index) => (
                            <tr key={el} className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
                            <td className="p-3 border border-gray-300 font-bold text-center text-lg sticky left-0 bg-inherit shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] z-10 text-blue-800">
                                {el}
                            </td>
                            
                            {columns.map((col) => {
                                const isCorrect = validation[el]?.[col.key];
                                const val = inputs[el][col.key];
                                let cellClass = "border border-gray-300 p-2 text-center transition-all duration-300 relative";
                                
                                if (isCorrect === true) cellClass += " bg-green-50 border-green-500 shadow-[inset_0_0_0_1px_rgba(34,197,94,0.5)]";
                                if (isCorrect === false) cellClass += " bg-red-50 border-red-500 shadow-[inset_0_0_0_1px_rgba(239,68,68,0.5)]";

                                return (
                                <td key={col.key} className={cellClass}>
                                    <div className="relative flex flex-col items-center justify-center h-full">
                                        <input
                                        type="text"
                                        value={val}
                                        onChange={(e) => handleInputChange(el, col.key, e.target.value)}
                                        className={`w-full h-10 bg-transparent outline-none text-center font-medium transition-colors ${
                                            isCorrect === true ? 'text-green-700 font-bold' : 
                                            isCorrect === false ? 'text-red-700 font-bold' : 
                                            'text-gray-700 focus:text-blue-600'
                                        }`}
                                        placeholder="-"
                                        autoComplete="off"
                                        />
                                        
                                        {showAnswers && (
                                        <div className="text-xs text-blue-700 font-bold mt-1 bg-blue-100 px-2 py-0.5 rounded border border-blue-200 absolute -bottom-3 z-20 shadow-sm pointer-events-none whitespace-nowrap">
                                            {Array.isArray(correctData[el][col.key]) ? correctData[el][col.key][0] : correctData[el][col.key]}
                                        </div>
                                        )}
                                    </div>
                                </td>
                                );
                            })}
                            </tr>
                        ))}
                        </tbody>
                    </table>
                    </div>

                    <div className="p-4 bg-gray-50 text-sm text-gray-500 flex gap-6 justify-center items-center border-t border-gray-200">
                    <div className="flex items-center gap-2">
                        <div className="w-4 h-4 bg-green-100 border border-green-500 rounded flex items-center justify-center">
                            <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                        </div> 
                        ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                    </div>
                    <div className="flex items-center gap-2">
                        <div className="w-4 h-4 bg-red-100 border border-red-500 rounded flex items-center justify-center">
                             <div className="w-2 h-2 bg-red-500 rounded-full"></div>
                        </div> 
                        ‡∏ú‡∏¥‡∏î
                    </div>
                    <div className="flex items-center gap-2">
                        <div className="w-4 h-4 bg-white border border-gray-300 rounded"></div> 
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à
                    </div>
                    </div>

                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ElementQuiz />);
    </script>
</body>
</html>
